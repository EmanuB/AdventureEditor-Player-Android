import org.json.*;
import java.util.ArrayList;

int currentScene;
int currentFrame;
int tempo;
org.json.JSONArray documento;
ArrayList<org.json.JSONObject> frames = new ArrayList<org.json.JSONObject>();
Hotspot[] frameHotspots;
boolean mudarFrame=false;
void setup(){
  fullScreen();
  noStroke();
  frameRate(60);
  currentFrame=0;
  
  documento = loadJSONArray("/storage/emulated/0/Sketchbook/Player/adventurePlayer/files/adventure.json");
  for (int i=0; i<documento.size(); i++){
    org.json.JSONObject frame= documento.getJSONObject(i);
    frames.add(frame);
    }
    mostrarFrame();
    mostrarHotspot();
  }
void draw(){
}
void mouseReleased(){
  for (int j=0; j<frames.get(currentFrame).getJSONArray("hotspots").size(); j++) {
    if (frameHotspots[j].mouseChecar()){
      currentFrame=frameHotspots[j].destino;
      mostrarFrame();
      //mostrarHotspot();
    };
  }
}
void mostrarFrame(){
  PImage imagem = loadImage(frames.get(currentFrame).getString("frameImg"));
  imagem.resize(width,height);
  background (imagem);
}
void mostrarHotspot(){
  frameHotspots= new Hotspot[frames.get(currentFrame).getJSONArray("hotspots").size()];
  for (int i=0; i<frames.get(currentFrame).getJSONArray("hotspots").size();i++){
    frameHotspots[i] = new Hotspot(i);
    frameHotspots[i].fazerHotspot();
  }
}
 
